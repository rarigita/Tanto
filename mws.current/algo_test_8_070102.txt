> restart;with(geometry);Digits:=30;_EnvHorizontalName := x; _EnvVerticalName := y;
[Apollonius, AreCollinear, AreConcurrent, AreConcyclic, AreConjugate, 

  AreHarmonic, AreOrthogonal, AreParallel, ArePerpendicular, AreSimilar, 

  AreTangent, CircleOfSimilitude, CrossProduct, CrossRatio, DefinedAs, 

  Equation, EulerCircle, EulerLine, ExteriorAngle, ExternalBisector, 

  FindAngle, GergonnePoint, GlideReflection, HorizontalCoord, HorizontalName, 

  InteriorAngle, IsEquilateral, IsOnCircle, IsOnLine, IsRightTriangle, 

  MajorAxis, MakeSquare, MinorAxis, NagelPoint, OnSegment, ParallelLine, 

  PedalTriangle, PerpenBisector, PerpendicularLine, Polar, Pole, RadicalAxis, 

  RadicalCenter, RegularPolygon, RegularStarPolygon, SensedMagnitude, 

  SimsonLine, SpiralRotation, StretchReflection, StretchRotation, TangentLine, 

  VerticalCoord, VerticalName, altitude, apothem, area, asymptotes, bisector, 

  center, centroid, circle, circumcircle, conic, convexhull, coordinates, 

  detail, diagonal, diameter, dilatation, directrix, distance, draw, dsegment, 

  ellipse, excircle, expansion, foci, focus, form, homology, homothety, 

  hyperbola, incircle, inradius, intersection, inversion, line, medial, 

  median, method, midpoint, orthocenter, parabola, perimeter, point, powerpc, 

  projection, radius, randpoint, reciprocation, reflection, rotation, segment, 

  sides, similitude, slope, square, stretch, tangentpc, translation, triangle, 

  vertex, vertices]
                               30
                               x
                               y
Este tanto es diferente de los anteriores, aqui se evaluan al vuelo z y c_z y su complementario, se construyen dos rectas opuestas y se restan las intersecciones con el eje y.
> tanto := proc( p1, p2, p3 )
>   local k, sq, a, c_a, die, r, c_z, c_q, t, fr;
>   k := p1 * p2;
>   sq := evalf(sqrt(k));
>   printf(" %d * %d = %d, sqrt(%d) = %f \n",p1,p2,k,k,sq);
> 
>   
>   a  := evalf( k / ( k - sq ) );
>   c_a:= a * sq;
> 
>   if ( p3 = 0 ) then
>     die := rand(2..trunc(sq));
>     r := die(); 
>     while ( (r mod 2) <> 0) do
>       r := die();
>     end do;
>   else
>     r := p3;
>   end if;
> 
>   c_z := (c_a*k)/(k-r*c_a);
>   c_q := -(c_z - sq);
>   t   := (((c_q*k)-(c_a*k))/(c_a*c_q));
> #  if( (frac(t) < .125) and (frac(t) > 0) ) then 
> #    t := trunc(t);
> #  elif( (frac(t) > .125) and (frac(t) < .25) ) then
> #    t := trunc(t)+0.125;
> #  elif( (frac(t) > .25) and (frac(t) < .5) ) then
> #    t := trunc(t)+0.25;
> #  elif( (frac(t) > .5) and (frac(t) < .625) ) then
> #    t := trunc(t)+0.5;
> #  elif( (frac(t) > .625) and (frac(t) < .75) ) then
> #    t := trunc(t)+0.625;
> #  elif( (frac(t) > .75) and (frac(t) < .875) ) then
> #    t := trunc(t)+0.75;
> #  elif( (frac(t) > .875) and (frac(t) < .99) ) then
> #    t := trunc(t)+0.875;
> #  end if;
>   c_q := (c_a*k)/(k-t*c_a);
> 
>   printf(" p1-1 = [%d,%f] , p2-1 = [%f,%f] \n", r, c_z, t, c_q);
> 
>   line(Y,y=x,[x,y]);
>   line(l0,y=0,[x,y]);
>   line(l1,x=0,[x,y]);
>   line(sqv,x=sq,[x,y]);
>   line(sqh,y=sq,[x,y]);
>   line(l_xk,y=-k,[x,y]);
>   line(l_yk,x=-k,[x,y]);
>   line(lxk,y=k,[x,y]);
>   line(lyk,x=k,[x,y]);
> 
>   point(P1,[t,c_z]):
>   point(P2,[r,c_q]):
>   line(lin1,[P1,P2]);
> 
>   point(P1,[t/2,c_z]):
>   point(P2,[r/2,c_q]):
>   line(lin12,[P1,P2]);
> 
>   point(P1,[r,c_z]):
>   point(P2,[t,c_q]):
>   line(lin2,[P1,P2]);
> 
>   ParallelLine(lin1_P1,intersection(Q1,lin2,l_xk),lin1);
>   ParallelLine(lin2_P1,intersection(Q2,lin1,lxk),lin2);
>   ParallelLine(lin1_P2,intersection(Q1,lin2,lxk),lin1);
>   ParallelLine(lin2_P2,intersection(Q2,lin1,l_xk),lin2);
> 
> 
>   print("recta a  ", a, c_a);
>   print("slope A ", slope(lin1));
>   
>   print("interseccion A-R ", coordinates(intersection(Q1,lin1,lin2)));
>   print("interseccion A-X ", coordinates(intersection(Q2,lin1,l0)));
>   print("interseccion A-Y ", coordinates(intersection(Q3,lin1,l1)));
>   print("interseccion R-X ", coordinates(intersection(Q4,lin2,l0)));
>   print("interseccion R-Y ", coordinates(intersection(Q5,lin2,l1)));
>   #print("distance AR<->AY ", distance(Q1,Q3));
>   #print("distance AX<->AY ", distance(Q2,Q3));
>   #print("distance AR<->AX ", distance(Q1,Q2));
>   print("interseccion A-SQV", coordinates(intersection(Q6,lin1,sqv)));
>   print("interseccion R-K", coordinates(intersection(Q7,lin2,lxk)));
>   print("intersection P1-Y", coordinates(intersection(Q8,lin2_P1,Y)));
>   print("new ", VerticalCoord(Q8)/VerticalCoord(Q6));
>   print("intersection P1-P2", coordinates(intersection(Q9,lin1_P1,lin2_P1)));
>   print("intersection P1-P2", coordinates(intersection(Q10,lin1_P2,lin2_P1)));
>   print("intersection V-XY", coordinates(intersection(Q11,lin12,Y)));
> 
>   line( H,[Q1,Q9] );
>   print(solve({Equation(H),x=0}));print(solve({Equation(H),y=0}));
>   print(solve({Equation(H),Equation(sqv)}));
> 
>   print(VerticalCoord(intersection(Q,lin1,l1)) + VerticalCoord(intersection(Q,lin2,l1)));
>   print(abs(VerticalCoord(intersection(Q,lin1,l1))) + abs(VerticalCoord(intersection(Q,lin2,l1))));
> 
>   draw([lin1_P2(colour=magenta), lin2_P2(colour=red), H(colour=yellow), lin2_P1(colour=magenta),lin1_P1(colour=blue), lin1(colour=blue), lin2,  sqv(colour=black), sqh(colour=black), Y(colour=black)], axes=normal, view=[-k*2..k*2,-k*2..k*2]);
> 
> end proc:
> tanto(3,11,2);
 3 * 11 = 33, sqrt(33) = 5.744563 
 p1-1 = [2,12.023774] , p2-1 = [10.000000,-6.279211] 
"recta a  ", 1.21076758270431339562033160838, 6.95533022924234205547094307659
          "slope A ", 2.28787307893019376934232125868
   "interseccion A-R ", [6., 2.87228132326901432992530573410]
   "interseccion A-X ", [4.74456264653802865985061146821, 0.]
  "interseccion A-Y ", [0., -10.8549571503121482861286218179]
   "interseccion R-X ", [7.25543735346197134014938853176, 0.]
   "interseccion R-Y ", [0., 16.5995197968501769459792332861]
"interseccion A-SQV", 

  [5.74456264653802865985061146822, 2.28787307893019376934232125870]
  "interseccion R-K", [-7.16843969807042989775917202329, 33.]
"intersection P1-Y", 

  [23.3752810115526629621791203758, 23.3752810115526629621791203758]
            "new ", 10.2170357380501681734886122024
"intersection P1-P2", 

  [34.8477541030648024758171211099, -2.87228132326901432992530573444]
"intersection P1-P2", 

  [5.99999999999999999999999999997, 63.1277186767309856700746942657]
"intersection V-XY", 

  [3.03571804907074512609148238930, 3.03571804907074512609148238930]
         {x = 0., y = 4.06708407138195451678630055933}
         {x = 20.4238770515324012379085605541, y = 0.}
{y = 2.92314753191685763211513992992, x = 5.74456264653802865985061146822}
                 5.7445626465380286598506114682
                27.4544769471623252321078551040

> evalf((log[3](33)))-evalf((log[11](33)));
> 
1.724501428652811858566762180839176304618342139576127031574973537944511
> evalf(sqrt(33)/11)*evalf(sqrt(33)/3);
1.000000000000000000000000000000000000000000000000000000000000000000000
> tanto(7,23,6);
 7 * 23 = 161, sqrt(161) = 12.688578 
 p1-1 = [6,28.302330] , p2-1 = [22.000000,-15.613753] 
"recta a  ", 1.08555360962780950237621107966, 13.7741311500773298825699838257
          "slope A ", 2.74475518052142816955395774362
"interseccion A-R ", 

  [14.0000000000000000000000000001, 6.34428877022476019009688637299]
   "interseccion A-X ", [11.6885775404495203801937727462, 0.]
  "interseccion A-Y ", [0., -32.0822837570752341836585220380]
   "interseccion R-X ", [16.3114224595504796198062272541, 0.]
   "interseccion R-Y ", [0., 44.7708612975247545638522947840]
"interseccion A-SQV", 

  [12.6885775404495203801937727461, 2.74475518052142816955395774347]
  "interseccion R-K", [-42.3459037539351317860069551299, 161.]
"intersection P1-Y", 

  [94.5541875738247906591793498017, 94.5541875738247906591793498017]
            "new ", 34.4490423935959525326407877142
"intersection P1-P2", 

  [131.314652426971222811626364768, -6.34428877022476019009688637285]
"intersection P1-P2", 

  [14.0000000000000000000000000001, 315.655711229775239809903113626]
"intersection V-XY", 

  [7.14605406314797465002325564810, 7.14605406314797465002325564810]
         {x = 0., y = 7.85850785446809333588873331998}
{x = 12.6885775404495203801937727461, y = 6.48613026420737925111175444820}
                12.6885775404495203801937727460
                76.8531450545999887475108168220

> tanto(23,61,22);
 23 * 61 = 1403, sqrt(1403) = 37.456642 
 p1-1 = [22,97.048819] , p2-1 = [60.000000,-59.592178] 
"recta a  ", 1.02742984422300719290103056963, 38.4840714448790916401458891852
          "slope A ", 4.12213150585534009249900839606
"interseccion A-R ", 

  [40.9999999999999999999999999997, 18.7283208003280422236224293075]
   "interseccion A-X ", [36.4566416006560844472448586152, 0.]
  "interseccion A-Y ", [0., -150.279070939740901568836914929]
   "interseccion R-X ", [45.5433583993439155527551413840, 0.]
   "interseccion R-Y ", [0., 187.735712540396986016081773544]
"interseccion A-SQV", 

  [37.4566416006560844472448586155, 4.12213150585534009249900839667]
 "interseccion R-K", [-294.814536055767178015812982296, 1403.]
"intersection P1-Y", 

  [577.157979556027533492395862966, 577.157979556027533492395862966]
            "new ", 140.014450954850738091985242989
"intersection P1-P2", 

  [721.715788910222187137136247359, -18.7283208003280422236224293015]
"intersection P1-P2", 

  [40.9999999999999999999999999992, 2787.27167919967195777637757070]
"intersection V-XY", 

  [20.7445630696743005992963603446, 20.7445630696743005992963603446]
         {x = 0., y = 20.9843611781860058401993262623}
{x = 37.4566416006560844472448586154, y = 18.9232954252583357939498220647}
                 37.456641600656084447244858615
                338.014783480137887584918688473

> tanto(101,103,100);
 101 * 103 = 10403, sqrt(10403) = 101.995098 
 p1-1 = [100,10454.247543] , p2-1 = [102.000000,-10352.252445] 
"recta a  ", 

  1.009901470671161289492259407130466466515339946128033214818910173305923, 

  103.0049993920908945879746123782426511590814595699295337611225329015201
"slope A ", 

  10403.24999399240639822260000152672141932087210081387652786148475913894
"interseccion A-R ", [101., 

  50.99754896070986664924117648555609234628305981190075027315181136406829]
"interseccion A-X ", 

  [100.9950979214197332984823529711121846925661196238015005463036227282142, 0.]
                     [    
"interseccion A-Y ", [0., 

                                                                             6
  -1.050677251844272336353833358977713307259061799122389628563736808861668 10 

  ]
  ]
"interseccion R-X ", 

  [101.0049020785802667015176470288878153074338803761984994536963772717858, 0.]
                     [    
"interseccion R-Y ", [0., 

                                                                            6]
  1.050779246942193756087131841330684419443754365242013430064283112484396 10 ]
"interseccion A-SQV", 

  [101.9950979214197332984823529711121846925661196238015005463036227282142, 

  10403.24999399240639822260000152672141932087210081387652786148475913900]
"interseccion R-K", 

  [100.0049261089546738111176409220021380239454771206923880077573407160939, 

  10403.]
"intersection P1-Y", 

  [102.9851505358834387669739849066898334065684854358469659862090492303634, 

  102.9851505358834387669739849066898334065684854358469659862090492303634]
"intersection P1-P2", 

  [102.9999519392511857808000122137713545669768065110122228918780731113838, 

  -50.99754896070986664924117648555609234628305981190075027315181136394813]
"intersection P1-P2", 

  [99.00004806074881421919998778622864543302319348898777710812192688861620, 

  -50.99754896070986664924117648555609234628305981190075027315181136382798]
{x = 0., 

  y = 5201.873771476558132435920589006138755833577580312888639067318285241456}

> p1:=nextprime(1234):p2:=nextprime(9741):tanto(p1,p2,1236);
 1237 * 9743 = 12052091, sqrt(12052091) = 3471.612162 
 p1-1 = [1236,5393.370361] , p2-1 = [9742.000000,-1921.758199] 
    "recta a  ", 1.000288133606828197106958648820205391824, 

      3472.612449651652899002368818158020953360
     "slope A ", 0.8599963038147004716970476852567220667114
"interseccion A-X ", [3470.612161518046070805261859509200747968, 0.]
"interseccion A-Y ", [0., -2984.713630879867853742463814619547050194]
"interseccion R-X ", [7507.387838481953929194738140490799252031, 0.]
"interseccion R-Y ", [0., 6456.325792397913924547725674128747798162]
"interseccion A-SQV", [3471.612161518046070805261859509200747968, 

  0.8599963038147004716970476852567220667765]

> sq:=3471.6121615180460708052618595092007479680398240441549720702966186223669976357682;
sq := 3471.612161518046070805261859509200747968039824044154972070296618622366\

  9976357682
> div:=.85999630381470047169704768525672206671128200549886;
  div := 0.85999630381470047169704768525672206671128200549886
> n:=sq/div/2;
         n := 2018.387838481953929194738140490799252032
> t:=.3878384819539291947381404907992520319601759558450279297033813776330023644;
t := 0.3878384819539291947381404907992520319601759558450279297033813776330023\

  644
> s:=1;
                             s := 1
> h:=trunc(HorizontalCoord(Q4));
                          h := 6022574
> s:=(evalf((h-trunc(sq))/2));
                                                        6
       s := 3.009551500000000000000000000000000000000 10 
> sq/((2018+t)*2);
           0.8599963038147004716970476852567220667113
> 
> p1:=nextprime(31234):p2:=nextprime(79741):tanto(p1,p2,31236);
 31237 * 79757 = 2491369409, sqrt(2491369409) = 49913.619474 
 p1-1 = [31236,133395.093928] , p2-1 = [79756,-83481.474454] 
"recta a  ", 1.0000200350134001674959377957286603433919917530984, 

  49914.619494082374855556045275244078243549249544240
"slope A ", 4.4698385899043734259469398249014787052221226257576
"interseccion R-X ", [61079.380525952638544611450662551650416794142447516, 0.]
"interseccion A-SQV", [49913.619474047361455388549337448349583205857552486, 

  4.4698385899043734259469398249014787052221226504534]
> sq:=49913.619474047361455388549337448349583205857552484793206962216670110388298245251;
sq := 49913.61947404736145538854933744834958320585755248479320696221667011038\

  8298245251
> div:=4.4698385899043734259469398249014787052221226257576;
   div := 4.4698385899043734259469398249014787052221226257576
> N:=sq/div/2;
    N := 5583.3805259526385446114506625516504167941424475150
> sq/(N*2);
      4.4698385899043734259469398249014787052221226257574
> p1:=nextprime(31234452345235134534569):p2:=nextprime(7974134534532564614536435):tanto(p1,p2,31234452345235134534570);
 31234452345235134534571 * 7974134534532564614536571 = 249067725113351140715759673466891035642943296041, sqrt(249067725113351140715759673466891035642943296041) = 499066854352551789175190.253585 
 p1-1 = [31234452345235134534570,532386649673435512627923.524410] , p2-1 = [7974134534532564614536570,-33319795320883723452733.270825] 
"recta a  ", 1.0000000000000000000000020037395617012426004174531, 

                                                        23
  4.9906685435255178917519125358500690969424306018096 10  
"slope A ", 0.071221649415301976542074236384499187669047499549944
"interseccion R-X ", 

  [                                                      24    ]
  [7.5063021325252479598959507464149930903057569398210 10  , 0.]
                        [
  "interseccion A-SQV", [

                                                          23  
    4.9906685435255178917519025358500690969424306017895 10  , 

                                                         ]
    0.071221649415301976542074234466313714807591510858350]
> sq:=499066854352551789175190.25358500690969424306017895;
                                                             23
 sq := 4.9906685435255178917519025358500690969424306017895 10  
> div:=.71221649415301976542074236384499187669047499549944e-1;
  div := 0.071221649415301976542074236384499187669047499549944
> n:=sq/div/2;
                                                            24
 n := 3.5036176390863480853603807464149930903057569398212 10  
> A:= evalf(sq/(n*2));
   A := 0.071221649415301976542074236384499187669047499549945
> p1:=nextprime(3974134534542554614536443):p2:=nextprime(4974134534532564614536435):tanto(p1,p2,3974134534542554614536448);
 3974134534542554614536449 * 4974134534532564614536541 = 19767879833146620227251820754792285546053686882909, sqrt(19767879833146620227251820754792285546053686882909) = 4446108391970063096389185.436732 
 p1-1 = [3974134534542554614536448,41883421130338374748205682.623980] , p2-1 = [4974134534532564614536540,-37437312738368311651816497.187249] 
"recta a  ", 1.0000000000000000000000002249157941821795518769669, 

                                                        24
  4.4461083919700630963891864367317550480466890547184 10  
"slope A ", 79.320733869499100531371178318021299153292455916712
"interseccion R-X ", 

  [                                                      24    ]
  [4.5021606771050561326838035632682449519533109452816 10  , 0.]
                        [
  "interseccion A-SQV", [

                                                          24  
    4.4461083919700630963891854367317550480466890547182 10  , 

                                                       ]
    79.320733869499100531371168506792404056133969969018]
> sq:=4446108391970063096389185.4367317550480466890547182;
                                                             24
 sq := 4.4461083919700630963891854367317550480466890547182 10  
> div:=79.320733869499100531371178318021299153292455916712;
   div := 79.320733869499100531371178318021299153292455916712
> n:=sq/div/2;
                                                            22
 n := 2.8026142567496518147309563268244951953310945281749 10  
> 3974134534542554614536448*.4367317550480466890547182;
                                                          24
    1.7356307500678220052326348136243940081298002689536 10  
> 

